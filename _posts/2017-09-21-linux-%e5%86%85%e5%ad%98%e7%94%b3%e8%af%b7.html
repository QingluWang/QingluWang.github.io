---
layout: post
status: publish
published: true
title: Linux-内存申请
author:
  display_name: Garlic
  login: wangqinglu
  email: 1119543546@qq.com
  url: ''
author_login: wangqinglu
author_email: 1119543546@qq.com
wordpress_id: 239
wordpress_url: http://blog.wql970522.top/?p=239
date: '2017-09-21 18:01:46 +0800'
date_gmt: '2017-09-21 10:01:46 +0800'
categories:
- Linux
tags: []
comments: []
---
<p>目的：理解Linux内存申请控制机制</p>
<p>环境：Centos7</p>
<p>相关文件：/proc/meminfo,/proc/sys/vm/overcommit_memory</p>
<p>&nbsp;</p>
<p>内容：</p>
<p>为了避免超出内存的情况经常发生，Linux对于进程申请内存有一套机制，即对于内存使用超出某一阈值后再申请内存的处理方法--memory overcommit处理机制。</p>
<p>Linux对于overcommit有如下三种处理机制</p>
<p><img class="alignnone size-full wp-image-240" src="http://blog.wql970522.top/wp-content/uploads/2017/09/捕获-1.png" alt="" width="620" height="467" /></p>
<p>简单概括就是：</p>
<p>0--允许试探性的内存申请，但拒绝太大的内存申请(系统默认的模式)</p>
<p>1--允许overcommit，尽情申请内存~</p>
<p>2--禁止overcommit(达到某一阈值)</p>
<p>PS:</p>
<p>1)本机模式：查看/proc/sys/vm/overcommit_memory</p>
<p>2)对于模式2，查看/proc/meminfo</p>
<p>获得CommitLimit值，超过此值即禁止内存申请</p>
<p>3)设置overcommit处理模式：sysctl vm.overcommit_memory=x</p>
<p>&nbsp;</p>
<p>参考资料：https://www.kernel.org/doc/Documentation/vm/overcommit-accounting</p>
